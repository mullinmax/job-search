{% extends "base.html" %}
{% block title %}Manage Jobs{% endblock %}
{% block content %}
<h1 class="mb-4">Manage Jobs</h1>
<form method="post" action="/cleanup" onsubmit="return confirm('Delete matching jobs?');">
  <button class="btn btn-danger" type="submit">Clean Database</button>
</form>
<form class="mt-3" method="post" action="/reprocess" onsubmit="return confirm('Generate AI data for missing roles?');">
  <button class="btn btn-warning" type="submit">Generate Missing AI Data</button>
</form>
<form class="mt-3" method="post" action="/delete_ai" onsubmit="return confirm('Delete all summaries and embeddings?');">
  <button class="btn btn-danger" type="submit">Delete AI Data</button>
</form>
<form class="mt-3" method="get" action="/export_likes">
  <button class="btn btn-primary" type="submit">Download Liked Jobs</button>
</form>
<form class="mt-3" method="post" action="/upload_csv" enctype="multipart/form-data">
  <div class="mb-2">
    <input class="form-control" type="file" name="file" accept=".csv" required>
  </div>
  <button class="btn btn-primary" type="submit">Upload CSV</button>
</form>
{% if deleted is not none %}
<p class="mt-3">{{ deleted }} jobs deleted.</p>
{% endif %}
{% endblock %}
